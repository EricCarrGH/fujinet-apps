;
; File generated by cc65 v 2.19 - Git dcdf7ade0
;
	.fopt		compiler,"cc65 v 2.19 - Git dcdf7ade0"
	.setcpu		"65SC02"
	.smart		on
	.autoimport	on
	.case		on
	.debuginfo	off
	.importzp	sp, sreg, regsave, regbank
	.importzp	tmp1, tmp2, tmp3, tmp4, ptr1, ptr2, ptr3, ptr4
	.macpack	longbranch
	.forceimport	__STARTUP__
	.import		_tgi_static_stddrv
	.import		_tgi_install
	.import		_tgi_init
	.import		_tgi_clear
	.import		_tgi_setcolor
	.import		_tgi_outtext
	.import		_strncpy
	.import		_atoi
	.import		_sleep
	.import		_map
	.import		_iss
	.import		_fujinet_init
	.import		_fujinet_send
	.import		_fujinet_recv
	.export		_url
	.export		_longitude_query
	.export		_latitude_query
	.export		_OC
	.export		_SCM
	.export		_longitude
	.export		_latitude
	.export		_timestamp_str
	.export		_timestamp
	.export		_main

.segment	"RODATA"

_url:
	.byte	$4E,$3A,$48,$54,$54,$50,$3A,$2F,$2F,$61,$70,$69,$2E,$6F,$70,$65
	.byte	$6E,$2D,$6E,$6F,$74,$69,$66,$79,$2E,$6F,$72,$67,$2F,$69,$73,$73
	.byte	$2D,$6E,$6F,$77,$2E,$6A,$73,$6F,$6E,$00
_longitude_query:
	.byte	$51,$2F,$69,$73,$73,$5F,$70,$6F,$73,$69,$74,$69,$6F,$6E,$2F,$6C
	.byte	$6F,$6E,$67,$69,$74,$75,$64,$65,$00
_latitude_query:
	.byte	$51,$2F,$69,$73,$73,$5F,$70,$6F,$73,$69,$74,$69,$6F,$6E,$2F,$6C
	.byte	$61,$74,$69,$74,$75,$64,$65,$00
S0005:
	.byte	$53,$00
S0006:
	.byte	$50,$00
S0007	:=	S0006+0
S0008:
	.byte	$51,$00
S0009	:=	S0008+0
S0004:
	.byte	$4F,$00

.segment	"BSS"

_OC:
	.res	67,$00
_SCM:
	.res	2,$00
_longitude:
	.res	16,$00
_latitude:
	.res	16,$00
_timestamp_str:
	.res	11,$00
_timestamp:
	.res	4,$00

; ---------------------------------------------------------------
; void __near__ main (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_main: near

.segment	"CODE"

	lda     #<(_tgi_static_stddrv)
	ldx     #>(_tgi_static_stddrv)
	jsr     _tgi_install
	jsr     _tgi_init
	jsr     _fujinet_init
	lda     #$0F
	jsr     _tgi_setcolor
	jsr     _tgi_clear
	lda     #$4F
	sta     _OC
	lda     #$0C
	sta     _OC+1
	stz     _OC+2
	lda     #<(_OC+3)
	ldx     #>(_OC+3)
	jsr     pushax
	lda     #<(_url)
	ldx     #>(_url)
	jsr     pushax
	ldx     #$00
	lda     #$40
	jsr     _strncpy
	lda     #$09
	jsr     pusha
	lda     #<(_OC)
	ldx     #>(_OC)
	jsr     pushax
	lda     #$43
	jsr     pusha0
	jsr     _fujinet_send
	lda     #<(S0004)
	ldx     #>(S0004)
	jsr     _tgi_outtext
	ldx     #$00
	lda     #$01
	jsr     _sleep
	lda     #$FC
	sta     _SCM
	lda     #$01
	sta     _SCM+1
	lda     #$09
	jsr     pusha
	lda     #<(_SCM)
	ldx     #>(_SCM)
	jsr     pushax
	lda     #$02
	jsr     pusha0
	jsr     _fujinet_send
	lda     #<(S0005)
	ldx     #>(S0005)
	jsr     _tgi_outtext
	ldx     #$00
	lda     #$01
	jsr     _sleep
	lda     #$09
	jsr     pusha
	lda     #<(S0006)
	ldx     #>(S0006)
	jsr     pushax
	lda     #$01
	jsr     pusha0
	jsr     _fujinet_send
	lda     #<(S0007)
	ldx     #>(S0007)
	jsr     _tgi_outtext
	ldx     #$00
	lda     #$01
	jsr     _sleep
	lda     #$09
	jsr     pusha
	lda     #<(_longitude_query)
	ldx     #>(_longitude_query)
	jsr     pushax
	lda     #$19
	jsr     pusha0
	jsr     _fujinet_send
	lda     #$09
	jsr     pusha
	lda     #<(_longitude)
	ldx     #>(_longitude)
	jsr     pushax
	lda     #<(M0001)
	ldx     #>(M0001)
	jsr     pushax
	jsr     _fujinet_recv
	lda     #<(S0008)
	ldx     #>(S0008)
	jsr     _tgi_outtext
	ldx     #$00
	lda     #$01
	jsr     _sleep
	lda     #$09
	jsr     pusha
	lda     #<(_latitude_query)
	ldx     #>(_latitude_query)
	jsr     pushax
	lda     #$18
	jsr     pusha0
	jsr     _fujinet_send
	lda     #$09
	jsr     pusha
	lda     #<(_latitude)
	ldx     #>(_latitude)
	jsr     pushax
	lda     #<(M0001)
	ldx     #>(M0001)
	jsr     pushax
	jsr     _fujinet_recv
	lda     #<(S0009)
	ldx     #>(S0009)
	jsr     _tgi_outtext
	lda     #<(_longitude)
	ldx     #>(_longitude)
	jsr     _atoi
	ldy     #$B4
	jsr     incaxy
	jsr     pushax
	lda     #<(_latitude)
	ldx     #>(_latitude)
	jsr     _atoi
	ldy     #$B4
	jsr     incaxy
	jsr     pushax
	jsr     _iss
	jmp     _map

.segment	"BSS"

M0001:
	.res	2,$00

.endproc

